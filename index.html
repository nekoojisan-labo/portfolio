        modal.classList.add('hidden');
        modal.classList.remove('flex');
        document.body.style.overflow = 'auto';
      }

      // プロジェクトカードのクリックイベント
      document.querySelectorAll('.project-card').forEach(card => {
        card.addEventListener('click', function() {
          const title = this.getAttribute('data-title');
          const image = this.getAttribute('data-image');
          const tags = this.getAttribute('data-tags');
          const description = this.getAttribute('data-description');
          openModal(title, image, tags, description);
        });
      });

      // モーダルを閉じる
      closeModal.addEventListener('click', hideModal);

      // モーダル外をクリックして閉じる
      modal.addEventListener('click', function(e) {
        if (e.target === modal) {
          hideModal();
        }
      });

      // ESCキーでモーダルを閉じる
      document.addEventListener('keydown', function(e) {
        if (e.key === 'Escape' && !modal.classList.contains('hidden')) {
          hideModal();
        }
      });

      // コンタクトフォーム
      document.getElementById('contact-form').addEventListener('submit', function(e) {
        e.preventDefault();
        
        const name = document.getElementById('name').value;
        const email = document.getElementById('email').value;
        const message = document.getElementById('message').value;
        
        if (!name || !email || !message) {
          alert('すべてのフィールドを入力してください。');
          return;
        }
        
        // メールアドレスの簡単な検証
        const emailRegex = /^[^\s@]+@[^\s@]+\.[^\s@]+$/;
        if (!emailRegex.test(email)) {
          alert('有効なメールアドレスを入力してください。');
          return;
        }
        
        alert('メッセージが送信されました！ありがとうございます。');
        this.reset();
      });

      // ページ読み込み時のアニメーション
      document.addEventListener('DOMContentLoaded', function() {
        console.log('Game Portfolio loaded successfully');
      });

      // デバッグ用
      window.emergencyCloseModal = hideModal;
    </script>
  </body>
</html>