# 🎵 BGMシステム実装ガイド

## 概要
このRPGゲームには、各フィールドや戦闘シーンに対応したBGMシステムが実装されています。
音楽ファイルを配置することで、ゲームに臨場感と没入感を与えることができます。

## 📁 フォルダ構成

BGM音楽ファイルは以下のフォルダ構成で配置してください：

```
rpg-game/
├── assets/
│   └── bgm/
│       ├── opening.mp3          # オープニング
│       ├── battle.mp3            # 通常戦闘
│       ├── boss_battle.mp3       # ボス戦
│       ├── shinjuku_city.mp3     # 新宿中央区画
│       ├── subway.mp3            # 地下鉄
│       ├── shrine.mp3            # 神社参道
│       ├── tokyo_gov.mp3         # 都庁
│       ├── dungeon.mp3           # 深層地下トンネル
│       ├── deep_dungeon.mp3      # 深層地下トンネル第2層
│       ├── shopping.mp3          # 商業街
│       ├── residential.mp3       # 住宅街
│       ├── black_market.mp3      # 闇市
│       └── biodome.mp3           # バイオドーム植物園
```

### フォルダ作成コマンド

```bash
cd rpg-game
mkdir -p assets/bgm
```

## 🎼 各楽曲のイメージと推奨スタイル

### 1. **オープニング** (opening.mp3)
- **イメージ**: 壮大で神秘的、物語の始まり、希望と不安が混ざる
- **テンポ**: ミディアム、感動的
- **楽器**: オーケストラ + 和楽器（琴、尺八）+ シンセ
- **参考ジャンル**: シネマティック、エピックオーケストラ
- **長さ**: 2-3分
- **推奨キーワード**: epic orchestral opening, cinematic japanese

---

### 2. **戦闘通常** (battle.mp3)
- **イメージ**: スピード感、緊張感、アクション
- **テンポ**: アップテンポ（130-140 BPM）
- **楽器**: エレキギター + ドラム + シンセベース
- **参考ジャンル**: ロック、エレクトロニカ、バトルBGM
- **長さ**: 1-2分（ループ推奨）
- **推奨キーワード**: battle theme rock, action combat music

---

### 3. **ボス戦** (boss_battle.mp3)
- **イメージ**: 激しい、壮大、圧倒的な敵
- **テンポ**: 速い（150-160 BPM）
- **楽器**: オーケストラ + 激しいロック + エレクトロニカ
- **参考ジャンル**: エピックロック、ヘビーオーケストラ
- **長さ**: 2-3分（ループ推奨）
- **推奨キーワード**: boss battle epic, intense orchestral rock

---

### 4. **新宿中央区画** (shinjuku_city.mp3)
- **イメージ**: 暗い都市、監視社会、無機質、閉塞感
- **テンポ**: スロー～ミディアム、ダーク
- **楽器**: シンセパッド、電子音、低音ベース
- **参考ジャンル**: サイバーパンク、ディストピア、ダークアンビエント
- **長さ**: 2-4分
- **推奨キーワード**: cyberpunk dark ambient, dystopian city

---

### 5. **地下鉄エリア** (subway.mp3)
- **イメージ**: 不気味、緊張感、地下の暗さ、機械音
- **テンポ**: スロー、不穏
- **楽器**: 低音ドローン、電子ノイズ、金属音
- **参考ジャンル**: ホラー、インダストリアル
- **長さ**: 2-3分
- **推奨キーワード**: dark underground ambient, horror industrial

---

### 6. **神社参道** (shrine.mp3)
- **イメージ**: 和風、神聖、静寂、神秘的、安らぎ
- **テンポ**: ゆっくり、厳かに
- **楽器**: 琴、尺八、鈴、太鼓
- **参考ジャンル**: 日本の伝統音楽、神社音楽、和風アンビエント
- **長さ**: 2-4分
- **推奨キーワード**: japanese shrine music, traditional peaceful

---

### 7. **都庁エントランス** (tokyo_gov.mp3)
- **イメージ**: 緊迫感、敵の本拠地、威圧的、冷たい
- **テンポ**: ミディアム、緊張
- **楽器**: オーケストラ + 電子音、重低音
- **参考ジャンル**: ダンジョン、ダークオーケストラ
- **長さ**: 2-3分
- **推奨キーワード**: dark orchestral dungeon, ominous tension

---

### 8. **深層地下トンネル** (dungeon.mp3)
- **イメージ**: ダーク、探索、危険、未知
- **テンポ**: ミディアム、不安
- **楽器**: ストリングス + 電子音、エコー
- **参考ジャンル**: ダンジョン探索、ダークファンタジー
- **長さ**: 2-4分
- **推奨キーワード**: dungeon exploration dark, mystery ambient

---

### 9. **深層地下トンネル第2層** (deep_dungeon.mp3)
- **イメージ**: より深い恐怖、ボス間近、絶望的
- **テンポ**: 遅め、重い
- **楽器**: 重低音、不協和音、ホラー系
- **参考ジャンル**: ダークホラー、ボスダンジョン
- **長さ**: 2-3分
- **推奨キーワード**: deep dungeon horror, boss approaching dark

---

### 10. **商業街** (shopping.mp3)
- **イメージ**: 明るい、都会的、賑やか、安全地帯
- **テンポ**: ミディアム～アップ、ポップ
- **楽器**: ピアノ、シンセ、明るい電子音
- **参考ジャンル**: アップビート、都会的ポップ、ショップBGM
- **長さ**: 2-3分
- **推奨キーワード**: upbeat shopping town, bright urban music

---

### 11. **住宅街** (residential.mp3)
- **イメージ**: 穏やか、平和、日常、ほっとする
- **テンポ**: ゆっくり、癒し系
- **楽器**: アコースティックギター、ピアノ、ストリングス
- **参考ジャンル**: アコースティック、ヒーリング、ほのぼの
- **長さ**: 2-4分
- **推奨キーワード**: peaceful town acoustic, calm healing music

---

### 12. **闇市** (black_market.mp3)
- **イメージ**: 怪しげ、アンダーグラウンド、危険な魅力
- **テンポ**: ミディアム、ミステリアス
- **楽器**: ジャズ風 + 電子音、ダークなベース
- **参考ジャンル**: ダークジャズ、ミステリアス
- **長さ**: 2-3分
- **推奨キーワード**: dark jazz underground, mysterious black market

---

### 13. **バイオドーム植物園** (biodome.mp3)
- **イメージ**: 幻想的、自然、神秘的、癒し
- **テンポ**: ゆっくり、夢のような
- **楽器**: シンセパッド、ハープ、フルート、環境音
- **参考ジャンル**: エンバイロメント、ヒーリング、ファンタジー
- **長さ**: 3-5分
- **推奨キーワード**: fantasy garden ambient, healing nature music

---

## 🎹 フリー音楽素材サイト推奨

音楽ファイルを入手できるフリー素材サイト：

### 日本語サイト
1. **魔王魂** - https://maou.audio/
   - 豊富なゲームBGM、ファンタジー系に強い

2. **DOVA-SYNDROME** - https://dova-s.jp/
   - 大量のフリーBGM、ジャンル豊富

3. **甘茶の音楽工房** - https://amachamusic.chagasi.com/
   - 和風、ファンタジー系

4. **煉獄庭園** - http://www.rengoku-teien.com/
   - ダーク、ホラー、バトル系に強い

### 英語サイト
1. **Incompetech** - https://incompetech.com/
   - Kevin MacLeod氏の膨大な音楽ライブラリ

2. **Purple Planet Music** - https://www.purple-planet.com/
   - 高品質なロイヤリティフリー音楽

3. **Bensound** - https://www.bensound.com/
   - シンプルで使いやすいBGM

## 🔧 技術仕様

### 対応フォーマット
- **推奨**: MP3 (最も互換性が高い)
- **代替**: OGG, WAV

### 音質設定
- **ビットレート**: 128-192 kbps（ファイルサイズとのバランス）
- **サンプリングレート**: 44.1 kHz
- **ステレオ/モノラル**: ステレオ推奨

### ファイルサイズ
- 各楽曲: 2-5 MB推奨
- 総容量: 30-60 MB程度

## 🎮 BGMシステムの動作

### 自動再生タイミング
1. **オープニング開始時**: `opening.mp3`
2. **ゲーム開始時**: 初期マップ（新宿中央区画）の`shinjuku_city.mp3`
3. **マップ移動時**: 各マップのBGMに自動切り替え（フェードイン/アウト）
4. **戦闘開始時**:
   - 通常敵: `battle.mp3`
   - ボス敵: `boss_battle.mp3`
5. **戦闘終了時**: フィールドBGMに復帰

### フェード効果
- フェードイン/アウト: 1秒
- ループ再生: 自動
- 音量: 個別設定可能（デフォルト30%）

## 📝 実装状況

✅ BGMシステムクラス作成済み (`bgm-system.js`)
✅ 全マップにBGM定義追加済み
✅ マップ遷移時の自動BGM切り替え
✅ 戦闘開始・終了時のBGM切り替え
✅ フェードイン/アウト機能
✅ ボス戦用の特別BGM対応

## 🚀 音楽ファイル追加方法

1. フリー音楽素材サイトから楽曲をダウンロード
2. ファイル名を上記の命名規則に変更
3. `assets/bgm/` フォルダに配置
4. ブラウザをリロードしてゲームを起動

**注意**: 音楽ファイルが存在しない場合でも、ゲームは正常に動作します（BGMなしで進行）。

## 🎵 BGMテスト方法

1. ゲームを起動
2. オープニングでBGMが流れるか確認
3. 各マップに移動してBGMが切り替わるか確認
4. 戦闘を開始して戦闘BGMが流れるか確認
5. 戦闘終了後、フィールドBGMに戻るか確認

ブラウザのコンソール（F12）で以下のようなログが表示されます：
```
BGM System initialized
BGM playing: オープニング
BGM playing: 新宿中央区画
```

## ❓ トラブルシューティング

### BGMが再生されない場合
1. ファイル名が正しいか確認
2. ファイルパスが正しいか確認 (`assets/bgm/`)
3. ブラウザのコンソールでエラーを確認
4. 音量設定を確認（ミュートになっていないか）
5. 対応フォーマット（MP3）か確認

### BGMが途中で止まる場合
- ファイルが破損していないか確認
- ブラウザキャッシュをクリア

### 音量を調整したい場合
`bgm-system.js`の`setVolume()`メソッドを使用：
```javascript
bgmSystem.setVolume(0.5); // 0.0 - 1.0の範囲
```

---

**デウス・コード 八百万の神託** BGMシステム
Version 1.0
